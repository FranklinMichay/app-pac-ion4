<ion-header>
    <ion-toolbar color="primary">
        <ion-back-button class="title-toolbar" slot="start">
        </ion-back-button>
        <ion-buttons slot="end">
            <ion-button (click)="returnHome()" slot="end">
                <ion-icon class="style-icon-logout" slot="icon-only" name="home"></ion-icon>
            </ion-button>
        </ion-buttons>
        <ion-title class="title-toolbar">RECETAS</ion-title>
    </ion-toolbar>
</ion-header>
<div>
    <div class="ion-padding div-menu">
        <ion-row class="nav-tabs">
            <ion-col class="col-left" [ngClass]="{'active': currentTab === 'step1'}" (click)="changeTab('step1')">
                <label class="text-center">Por ordenar</label>
            </ion-col>
            <!-- <ion-col class="col-center" [ngClass]="{'active': currentTab === 'step2'}" (click)="changeTab('step2')">
                <label class="text-center">Compradas</label>
            </ion-col> -->
            <ion-col class="col-right" [ngClass]="{'active': currentTab === 'step3'}" (click)="changeTab('step3')">
                <label class="text-center">Compradas</label>
            </ion-col>
        </ion-row>
    </div>
    <div *ngIf="currentStep" class="title-data">
        <ion-label class="medicamentos">Órdenes Pendientes</ion-label>
    </div>
</div>

<ion-content class="content-cites">
    <div class="form-group required" *ngIf="currentTab === 'step1'">
        <div *ngIf="newAppointment" class="bg-medics">
            <ion-grid class="content-medic">
                <ion-row *ngFor="let appointment of newAppointment" (click)="prepareIdsRequest(appointment)" class="container-medic">
                    <ion-col class="container-image" size="2">
                        <img class="image" src="assets/icon/receta.svg " />
                    </ion-col>
                    <ion-col class="container-info-medic " size="9">
                        <ion-row>
                            <ion-col class="name" size="8">
                                DR: {{ appointment.datosMed.priNombre | uppercase}} {{ appointment.datosMed.priApellido | uppercase}}
                            </ion-col>
                            <ion-col class="codReceta" size="4">
                                COD#:{{ appointment.codiRece }}
                            </ion-col>
                        </ion-row>
                        <ion-row>
                            <ion-col class="fecha" size="12">
                                {{ appointment.fecha | date: 'dd MMM y' | titlecase}}
                            </ion-col>
                        </ion-row>
                        <ion-row>
                            <ion-col class="cm" size="12">
                                {{ appointment.datosMed.especialidad}}
                            </ion-col>
                        </ion-row>
                    </ion-col>
                    <ion-col size="1" class="icon-medic">
                        <ion-icon name="ios-arrow-forward"></ion-icon>
                    </ion-col>
                </ion-row>
            </ion-grid>
            <div *ngIf="newAppointment.length === 0" class="empty-container ">
                <img src="assets/icon/no-documents.svg" class="empty-state ">
                <h3 class="text-center-no-desp">No hay recetas nuevas</h3>
            </div>
        </div>

    </div>

    <div class="form-group required" *ngIf="currentTab === 'step3'">
        <ion-grid class="content-medic" *ngFor="let desp of despachos" (click)="prepareIdsDesp(desp)">
            <ion-row *ngIf="desp.estadoDespacho === 'nuevo'" class="container-medic">
                <ion-col class="container-image" size="2">
                    <img class="image " src="assets/icon/receta.svg " />
                </ion-col>
                <ion-col class="container-info-medic " size="9">
                    <ion-row>
                        <ion-col class="name" size="8">
                            DR: {{ desp.datosReceta.datosMedico.priNombre | uppercase}} {{ desp.datosReceta.datosMedico.priApellido | uppercase}}
                        </ion-col>
                        <ion-col class="codReceta" size="4">
                            COD#:{{ desp.datosReceta.codiRece }}
                        </ion-col>
                    </ion-row>
                    <ion-row>
                        <ion-col class="fecha" size="12">
                            {{ desp.fecha | date: 'dd MMM y' | titlecase}}
                        </ion-col>
                    </ion-row>
                    <ion-row>
                        <ion-col class="cm" size="8">
                            {{ desp.datosReceta.datosMedico.especialidad}}
                        </ion-col>
                        <ion-col size="4">
                            <ion-label class="label-state" [color]="getColor(desp.estadoDespacho)">
                                {{ desp.estadoDespacho}}</ion-label>
                        </ion-col>
                    </ion-row>
                </ion-col>
                <ion-col size="1" class="icon-medic">
                    <ion-icon name="ios-arrow-forward"></ion-icon>
                </ion-col>
            </ion-row>
        </ion-grid>
        <div *ngIf="despachos.length === 0" class="empty-container ">
            <img src="assets/icon/no-documents.svg" class="empty-state ">
            <h3 class="text-center-no-desp">No hay órdenes pendientes</h3>
        </div>
    </div>
</ion-content>

<div sticky *ngIf="currentStep" class="title-data">
    <ion-label class="medicamentos">Historial</ion-label>
</div>
<ion-content *ngIf="currentStep" class="content-cites">
    <ion-item-group *ngFor="let item of dateDivider">
        <ion-item-divider sticky class="item-divider">
            <ion-label class="date-hist">{{item| date: 'dd MMM y' | titlecase}}</ion-label>
        </ion-item-divider>
        <div *ngFor="let item2 of despachos">
            <ion-grid *ngIf="item == item2.fecha" (click)="prepareIdsDesp(item2)" class="content-medic-slide">
                <ion-row *ngIf="item2.estadoDespacho !== 'nuevo'" class=" container-medic ">
                    <ion-col class="container-image " size="2 ">
                        <img class="image " src="assets/icon/receta.svg " />
                    </ion-col>
                    <ion-col class="container-info-medic " size="9 ">
                        <ion-row>
                            <ion-col class="name " size="8 ">
                                DR: {{ item2.datosReceta.datosMedico.priNombre | uppercase}} {{ item2.datosReceta.datosMedico.priApellido | uppercase}}
                            </ion-col>
                            <ion-col class="codReceta " size="4 ">
                                COD#:{{ item2.datosReceta.codiRece }}
                            </ion-col>
                        </ion-row>
                        <ion-row>
                            <ion-col class="fecha " size="12 ">
                                {{ item2.fecha | date: 'dd MMM y' | titlecase}}
                            </ion-col>
                        </ion-row>
                        <ion-row>
                            <ion-col class="cm " size="8">
                                {{ item2.datosReceta.datosMedico.especialidad}}
                            </ion-col>
                            <ion-col size="4">

                                <ion-label class="label-state" [color]="getColor(item2.estadoDespacho)">
                                    {{ item2.estadoDespacho}}
                                </ion-label>

                            </ion-col>
                        </ion-row>
                    </ion-col>
                    <ion-col size="1 " class="icon-medic">
                        <ion-icon name="ios-arrow-forward"></ion-icon>
                    </ion-col>
                </ion-row>
            </ion-grid>

        </div>

    </ion-item-group>
</ion-content>

<!-- <ion-slides #slider loop (ionSlideNextEnd)="nextWeek() " (ionSlidePrevEnd)="previousWeek() " [options]="slideOpts ">
        <ion-slide *ngFor="let n of numbers " class="content-header ">
            <ion-row>
                <ion-col *ngFor=" let v of daysWeek ">
                    <span>
                        {{v.label}}
                    </span>
                    <span *ngIf="v.day " class="day-number " [className]="v.selected ? 'today' : 'sn' " (click)="changeDay(v.day) ">
                        {{v.day}}
                    </span>
                </ion-col>
                <ion-col size="12 ">
                    <span class="text-center-day date-label "> {{dateLabel}}</span>
                </ion-col>
            </ion-row>

        </ion-slide>
    </ion-slides> -->