<ion-header>
    <ion-toolbar color="primary">
        <ion-back-button class="title-toolbar" slot="start"> </ion-back-button>

        <ion-title class="title-toolbar">Pago</ion-title>
    </ion-toolbar>
    <!-- <link href='https://api.mapbox.com/mapbox-gl-js/v0.52.0/mapbox-gl.css' rel='stylesheet' /> -->
</ion-header>



<section >
  <ion-row>

    <div *ngIf="isDatosPersonales" >
      <form [formGroup]="datosPersonalesFrom">
        <ion-list-header>
          <ion-label class="best-results">Datos de facturación</ion-label>
        </ion-list-header>
        <ion-row>
          <ion-col size="6">
            <ion-label class="position-label">Nombres</ion-label>
            <ion-input class="mail" type="text" formControlName="nombres">
            </ion-input>
            <ion-label *ngIf="datosPersonalesFrom.get('nombres').errors && datosPersonalesFrom.get('nombres').dirty">
              <p class="validator" ion-text *ngIf="datosPersonalesFrom.get('nombres').hasError('required')">
                Este campo es requerido
              </p>
            </ion-label>
          </ion-col>

          <ion-col size="6">        
            <ion-label class="position-label">Apellidos</ion-label>
            <ion-input class="mail" type="text" formControlName="apellidos">
            </ion-input>
            <ion-label
              *ngIf="datosPersonalesFrom.get('apellidos').errors && datosPersonalesFrom.get('apellidos').dirty">
              <p class="validator" ion-text *ngIf="datosPersonalesFrom.get('apellidos').hasError('required')">
                Este campo es requerido
              </p>
            </ion-label>
      
          </ion-col>
        </ion-row>

        <ion-row>
          <ion-col size="6">
            <ion-label class="position-label">Email</ion-label>
            <ion-input class="mail" type="text" formControlName="email" placeholder="Email">
            </ion-input>
            <ion-label *ngIf="datosPersonalesFrom.get('email').errors && datosPersonalesFrom.get('email').dirty">
              <p class="validator" ion-text *ngIf="datosPersonalesFrom.get('email').hasError('required')">
                Este campo es requerido
              </p>
              <p class="validator" ion-text *ngIf="datosPersonalesFrom.get('email').hasError('email')">
                El email es inválido
              </p>
            </ion-label>
          </ion-col>

          <ion-col size="6">
            <ion-label class="position-label">Teléfono</ion-label>
            <ion-input class="mail" type="text" formControlName="telefono" placeholder="Telefono">
            </ion-input>
            <ion-label *ngIf="datosPersonalesFrom.get('telefono').errors && datosPersonalesFrom.get('telefono').dirty">
              <p class="validator" ion-text *ngIf="datosPersonalesFrom.get('telefono').hasError('required')">
                Este campo es requerido
              </p>
            </ion-label>
          </ion-col>
        </ion-row>

        <ion-row>
          <ion-col size="6">
            <ion-label class="position-label">Identificación</ion-label>
            <ion-input class="mail" type="text" formControlName="identificacion" placeholder="Identificación">
            </ion-input>
            <ion-label
              *ngIf="datosPersonalesFrom.get('identificacion').errors && datosPersonalesFrom.get('identificacion').dirty">
              <p class="validator" ion-text *ngIf="datosPersonalesFrom.get('identificacion').hasError('required')">
                Este campo es requerido
              </p>
              <p class="validator" ion-text *ngIf="datosPersonalesFrom.get('identificacion').hasError('pattern')">
                El campo debe contener 10 números
              </p>
            </ion-label>
          </ion-col>
        </ion-row>

        <ion-button class="accept-edit" type="submit" (click)="goDireccion()" [disabled]="datosPersonalesFrom.invalid">
          Siguiente</ion-button>
      </form>
    </div>


    <div *ngIf="isDireccion">
      <section>
        <ion-col size="12">
          <form [formGroup]="direccionForm">
            <ion-list-header>
              <ion-label class="best-results">Direccion de entrega</ion-label>
            </ion-list-header>
            <ion-row>
              <ion-col size="6">      
                <ion-label class="position-label">Calle Principal</ion-label>          
                <ion-input class="mail" type="text" formControlName="callePrincipal">
                </ion-input>
                <ion-label
                  *ngIf="direccionForm.get('callePrincipal').errors && direccionForm.get('callePrincipal').dirty">
                  <p class="validator" ion-text *ngIf="direccionForm.get('callePrincipal').hasError('required')">
                    Este campo es requerido
                  </p>
                </ion-label>
              </ion-col>
              <ion-col size="6">
                <ion-label class="position-label">Calle Secundaria</ion-label>  
                <ion-input class="mail" type="text" formControlName="calleSecundaria">
                </ion-input>
                <ion-label
                  *ngIf="direccionForm.get('calleSecundaria').errors && direccionForm.get('calleSecundaria').dirty">
                  <p class="validator" ion-text *ngIf="direccionForm.get('calleSecundaria').hasError('required')">
                    Este campo es requerido
                  </p>
                </ion-label>
              </ion-col>
            </ion-row>
            <ion-row>
              <ion-col size="6">
                <ion-label class="position-label">Num casa</ion-label>
                <ion-input class="mail" type="text" formControlName="numCasa">
                </ion-input>
                <ion-label *ngIf="direccionForm.get('numCasa').errors && direccionForm.get('numCasa').dirty">
                  <p class="validator" ion-text *ngIf="direccionForm.get('numCasa').hasError('required')">
                    Este campo es requerido
                  </p>
                </ion-label>
              </ion-col>

              <ion-col size="6">
                <ion-label class="position-label">Referencia</ion-label>
                <ion-input class="mail" type="text" formControlName="referencia">
                </ion-input>
                <ion-label *ngIf="direccionForm.get('referencia').errors && direccionForm.get('referencia').dirty">
                  <p class="validator" ion-text *ngIf="direccionForm.get('referencia').hasError('required')">
                    Este campo es requerido
                  </p>
                </ion-label>
              </ion-col>
            </ion-row>

            <ion-row>
              <ion-col size="6">
                <ion-label class="position-label">Ciudad</ion-label>
                <ion-input class="mail" type="text" formControlName="ciudad">
                </ion-input>
                <ion-label *ngIf="direccionForm.get('ciudad').errors && direccionForm.get('ciudad').dirty">
                  <p class="validator" ion-text *ngIf="direccionForm.get('ciudad').hasError('required')">
                    Este campo es requerido
                  </p>
                </ion-label>
              </ion-col>
            </ion-row>
          </form>
        </ion-col>

      </section>

 
    </div>
  </ion-row>
</section>

<section *ngIf="isPago">
  <ion-list>
    <ion-radio-group  [(ngModel)]="metodoPago"> 
      <ion-list-header>
        <ion-label>Método de pago</ion-label>
      </ion-list-header>
  
      <ion-item>
        <fa-icon slot="start" [icon]="faCreditCard"></fa-icon>         
        <ion-label>Tarjeta de Crédito/Débito</ion-label>
        <ion-radio slot="end" value="tarjeta" checked></ion-radio>
      </ion-item>
  
      <ion-item>
        <fa-icon slot="start" [icon]=" faMoneyCheckAlt"></fa-icon>
        <ion-label>Trasnferencia Bancaria</ion-label>
        <ion-radio slot="end" value="transferencia"></ion-radio>
      </ion-item>
  
      <ion-item>
        <fa-icon slot="start" [icon]=" faMoneyBill"></fa-icon>
        <ion-label>Pagar en la entrega</ion-label>
        <ion-radio slot="end" value="entrega"></ion-radio>
      </ion-item>
    </ion-radio-group>
  </ion-list>
  <pre>
    {{metodoPago}}
  </pre>
  <ion-list *ngIf="metodoPago=='tarjeta'">
    <ion-item>
        <ion-label position="stacked">Número tarjeta</ion-label>
        <ion-input placeholder="xxxxxxxxxxxxxx" type="text">
        </ion-input>
    </ion-item>


    <ion-item>
        <ion-label position="stacked">Fecha de expiración</ion-label>
        <ion-input placeholder=".. /...." type="text">
        </ion-input>
    </ion-item>

    <ion-item>
      <ion-label position="stacked">CVC</ion-label>
      <ion-input placeholder="..." type="text">
      </ion-input>
  </ion-item>

</ion-list>
<ion-row > 
  <ion-col class="ion-text-center" size="12">
    <ion-button class="accept-edit" (click)="goPay()">
      Pagar</ion-button>
  </ion-col>
</ion-row>
</section>
<ion-content class="noScroll">
    <div [hidden]="!isDireccion">
        <div class="map" id="map"></div>
        <ion-fab (click)="getCurrentPosition()" vertical="center" horizontal="end" slot="">
            <ion-fab-button>
                <ion-icon color="light" name="locate"></ion-icon>
            </ion-fab-button>
        </ion-fab>
    </div>
    <!-- <ion-button size="large" [routerLink]="['/directions']"> Cómo llegar</ion-button> -->

</ion-content>
<ion-row [hidden]="!isDireccion">
  <ion-col size="6">
    <ion-button class="accept-edit" (click)="goDatos()">Atrás</ion-button>
  </ion-col>
  <ion-col size="6">
    <ion-button class="accept-edit" (click)="gotoPagos()" [disabled]="direccionForm.invalid">
      Siguiente</ion-button>
  </ion-col>
</ion-row>