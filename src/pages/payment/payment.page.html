<ion-header>
    <ion-toolbar color="primary">
        <ion-back-button class="title-toolbar" slot="start"> </ion-back-button>
        <ion-title class="title-toolbar">PAGO</ion-title>
    </ion-toolbar>
</ion-header>
<div class="div-slide">
    <ol>
        <li [ngClass]="{'current': currentTab === 'step1'}" (click)="goDireccion()">ENVÍO</li>
        <li [ngClass]="{'current': currentTab === 'step2'}" (click)="goFac()">FACTURACIÓN</li>
        <li [ngClass]="{'current': currentTab === 'step3'}">PAGO</li>
    </ol>
</div>

<ion-content class="bg-form">
    <div *ngIf="isDireccion">
        <form [formGroup]="direccionForm">
            <ion-row class="row-data-fac">
                <ion-row class="row-horario">
                    <ion-col size="6" *ngFor="let h of horario">
                        <div class="horario" [ngClass]="{'horario-a': horarioSelected === h}" (click)="updateShedule(h)">
                            <ion-icon name="radio-button-on" class="select-button"></ion-icon>
                            <p class="label"> {{h.name}}</p>

                        </div>
                    </ion-col>
                </ion-row>



                <ion-col size="12">
                    <ion-input class="mail" type="text" formControlName="callePrincipal" placeholder="Calle Principal">
                    </ion-input>
                    <ion-label *ngIf="direccionForm.get('callePrincipal').errors && direccionForm.get('callePrincipal').dirty">
                        <p class="validator" ion-text *ngIf="direccionForm.get('callePrincipal').hasError('required')">
                            Este campo es requerido
                        </p>
                    </ion-label>

                </ion-col>
                <ion-col size="12">
                    <ion-input class="mail" type="text" formControlName="calleSecundaria" placeholder="Calle Secundaria">
                    </ion-input>
                    <ion-label *ngIf="direccionForm.get('calleSecundaria').errors && direccionForm.get('calleSecundaria').dirty">
                        <p class="validator" ion-text *ngIf="direccionForm.get('calleSecundaria').hasError('required')">
                            Este campo es requerido
                        </p>
                    </ion-label>
                </ion-col>

                <ion-col size="12">
                    <ion-input class="mail" type="text" formControlName="numCasa" placeholder="Número de casa">
                    </ion-input>
                    <ion-label *ngIf="direccionForm.get('numCasa').errors && direccionForm.get('numCasa').dirty">
                        <p class="validator" ion-text *ngIf="direccionForm.get('numCasa').hasError('required')">
                            Este campo es requerido
                        </p>
                    </ion-label>
                </ion-col>

                <ion-col size="12">
                    <ion-input class="mail" type="text" formControlName="referencia" placeholder="Referencia">
                    </ion-input>
                    <ion-label *ngIf="direccionForm.get('referencia').errors && direccionForm.get('referencia').dirty">
                        <p class="validator" ion-text *ngIf="direccionForm.get('referencia').hasError('required')">
                            Este campo es requerido
                        </p>
                    </ion-label>
                </ion-col>

                <ion-col size="12">
                    <ion-input class="mail" type="text" formControlName="ciudad" placeholder="Ciudad">
                    </ion-input>
                    <ion-label *ngIf="direccionForm.get('ciudad').errors && direccionForm.get('ciudad').dirty">
                        <p class="validator" ion-text *ngIf="direccionForm.get('ciudad').hasError('required')">
                            Este campo es requerido
                        </p>
                    </ion-label>
                </ion-col>
            </ion-row>
        </form>
    </div>


    <div *ngIf="isDatosPersonales">

        <form [formGroup]="datosPersonalesFrom">
            <ion-row class="row-data-fac">
                <ion-col size="12">
                    <ion-input class="mail" type="text" formControlName="nombres" placeholder="Nombre">
                    </ion-input>
                    <ion-label *ngIf="datosPersonalesFrom.get('nombres').errors && datosPersonalesFrom.get('nombres').dirty">
                        <p class="validator" ion-text *ngIf="datosPersonalesFrom.get('nombres').hasError('required')">
                            Este campo es requerido
                        </p>
                    </ion-label>
                </ion-col>

                <ion-col size="12">
                    <ion-input class="mail" type="text" formControlName="apellidos">
                    </ion-input>
                    <ion-label *ngIf="datosPersonalesFrom.get('apellidos').errors && datosPersonalesFrom.get('apellidos').dirty">
                        <p class="validator" ion-text *ngIf="datosPersonalesFrom.get('apellidos').hasError('required')">
                            Este campo es requerido
                        </p>
                    </ion-label>
                </ion-col>

                <ion-col size="12">
                    <ion-input class="mail" type="text" formControlName="email" placeholder="Email">
                    </ion-input>
                    <ion-label *ngIf="datosPersonalesFrom.get('email').errors && datosPersonalesFrom.get('email').dirty">
                        <p class="validator" ion-text *ngIf="datosPersonalesFrom.get('email').hasError('required')">
                            Este campo es requerido
                        </p>
                        <p class="validator" ion-text *ngIf="datosPersonalesFrom.get('email').hasError('email')">
                            El email es inválido
                        </p>
                    </ion-label>
                </ion-col>

                <ion-col size="12">
                    <ion-input class="mail" type="text" formControlName="telefono" placeholder="Telefono">
                    </ion-input>
                    <ion-label *ngIf="datosPersonalesFrom.get('telefono').errors && datosPersonalesFrom.get('telefono').dirty">
                        <p class="validator" ion-text *ngIf="datosPersonalesFrom.get('telefono').hasError('required')">
                            Este campo es requerido
                        </p>
                    </ion-label>
                </ion-col>

                <ion-col size="12">
                    <ion-input class="mail" type="text" formControlName="identificacion" placeholder="Identificación">
                    </ion-input>
                    <ion-label *ngIf="datosPersonalesFrom.get('identificacion').errors && datosPersonalesFrom.get('identificacion').dirty">
                        <p class="validator" ion-text *ngIf="datosPersonalesFrom.get('identificacion').hasError('required')">
                            Este campo es requerido
                        </p>
                        <p class="validator" ion-text *ngIf="datosPersonalesFrom.get('identificacion').hasError('pattern')">
                            El campo debe contener 10 números
                        </p>
                    </ion-label>
                </ion-col>
            </ion-row>
        </form>
    </div>

    <div *ngIf="isPago">
        <ion-list-header class="title-metodo">
            <ion-label class="medicamentos">Elige un método de pago</ion-label>
        </ion-list-header>
        <div class="option">
            <ion-grid class="section-hero white-bg " id="section-category ">
                <ion-row *ngIf="options" class="g12grid ">
                    <ion-col class="block-explore " *ngFor="let category of options" size="6 ">
                        <div class="inner " tappable>
                            <div class="metodo-pago" [ngClass]="{'metodo-pago-a': active === category}" (click)="updateActive(category)">
                                <a *ngIf="category.name">
                                    <ion-icon name="radio-button-on" class="select-button"></ion-icon>
                                    <!-- <img class="crop " [src]="category.logo "> -->
                                    <p class="explore-title ">{{category.name}}</p>
                                    <p class="explore-text ">{{category.text}}</p>
                                </a>
                            </div>
                        </div>
                    </ion-col>
                </ion-row>
            </ion-grid>
        </div>
    </div>

    <div *ngIf="isCard">
        <ion-list-header class="title-metodo">
            <ion-label class="medicamentos">Tarjeta de crédito</ion-label>
        </ion-list-header>
        <div class="list-card">
            <ion-slides [options]="sliderConfig">
                <ion-slide *ngFor="let card of cards">
                    <div class="content-card" [ngClass]="{'content-card-a': activeCard === card}" (click)="updateActiveCard(card)">
                        <ion-icon name="radio-button-on" class="select-button"></ion-icon>
                        <img class="imgs-card" [src]="card.logo">
                        <!-- <ion-button expand=" full " (click)="addToCart(product) ">Add to Cart</ion-button> -->
                    </div>
                </ion-slide>
            </ion-slides>
        </div>

        <div class="content-data">
            <ion-row>
                <ion-col size="12">

                    <ion-input class="input-tarjeta" type="text" placeholder="NOMBRE SOBRE LA TARJETA">
                    </ion-input>
                </ion-col>
                <ion-col size="12">
                    <ion-input class="input-tarjeta" type="text" placeholder="NÚMERO DE LA TARJETA">
                    </ion-input>
                </ion-col>
                <ion-col size="6">
                    <ion-input class="input-col6" type="text" placeholder="FECHA EXPIRACIÓN">
                    </ion-input>
                </ion-col>
                <ion-col size="6">
                    <ion-input class="input-col6" type="text" placeholder="CVV">
                    </ion-input>
                </ion-col>
            </ion-row>


        </div>
        <ion-row>
            <ion-col size="2 ">
                <ion-checkbox class="ion-text-left " [(ngModel)]="cboxPoliticas "></ion-checkbox>

            </ion-col>
            <ion-col size="10 ">
                <p class="politicas ">Acepto las <a href="http://medipharm.com.ec/sistema-medico/#/politicas ">condiciones
                        de uso y políticas de privacidad</a> de Medipharm </p>

            </ion-col>
        </ion-row>
    </div>

    <div *ngIf="isContraEntrega" class="entrega ">

        <ion-list-header class="title-metodo">
            <ion-label class="medicamentos">Ten presente los siguientes consejos:</ion-label>
        </ion-list-header>
        <div class="content-consejo">
            <p class="text-consejo"> 1. Estar presente al horario establecido de entrega. </p>
            <p class="text-consejo"> 2. Tener el dinero a la mano cuando se entregue tu pedido. </p>
            <p class="text-consejo"> 3. Revisar si tu pedido esta completo. </p>
            <p class="text-consejo"> 4. Confirmar que tu pedido ha sido entregado con exito para terminar la compra.
            </p>
        </div>
        <ion-row>
            <ion-col size="2 ">
                <ion-checkbox class="ion-text-left " [(ngModel)]="cboxPoliticas "></ion-checkbox>

            </ion-col>
            <ion-col size="10 ">
                <p class="politicas ">Acepto las <a href="http://medipharm.com.ec/sistema-medico/#/politicas ">condiciones
                        de uso y políticas de privacidad</a> de Medipharm </p>

            </ion-col>
        </ion-row>
    </div>


    <ion-content *ngIf="isDireccion" class="noScroll">
        <!-- <div [hidden]="!isDireccion" class="bg-form"> -->
        <div class="map" id="map"></div>
        <ion-fab (click)="getCurrentPosition()" vertical="center" horizontal="end" slot="">
            <ion-fab-button class="i-fab">
                <ion-icon color="light" name="locate"></ion-icon>
            </ion-fab-button>
        </ion-fab>
        <!-- </div> -->
        <!-- <ion-button size="large" [routerLink]="['/directions']"> Cómo llegar</ion-button> -->
    </ion-content>

</ion-content>
<ion-footer class="bg-footer ">

    <ion-button *ngIf="isDireccion " class="accept-edit " type="submit " (click)="goData() " [disabled]="direccionForm.invalid ">
        PROCEDER A FACTURACIÓN</ion-button>

    <ion-button *ngIf="isDatosPersonales " class="accept-edit " type="submit " (click)="goDatos() " [disabled]="datosPersonalesFrom.invalid ">
        PROCEDER A MÉTODO DE PAGO</ion-button>

    <ion-button *ngIf="isPago" [disabled]="!cboxPoliticas" class="accept-edit " type="submit ">
        PAGAR
    </ion-button>

</ion-footer>